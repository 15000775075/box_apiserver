(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-login"],{"5a5b":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("00b4");var n={data:function(){return{phone:"",num:"",code:"",codeText:"",nickName:"",headImage:"",id:"",appName:"",pnoneNum:""}},onLoad:function(t){t.id&&(this.id=t.id),console.log(this.id,"邀请码"),this.getName()},methods:{applogin:function(){var t=this;uni.login({provider:"weixin",onlyAuthorize:!0,success:function(e){e.code;t.$http({url:"index.php/api/user/getWechatInfoByAPP",data:{code:e.code}}).then((function(e){console.log(e,"1111"),1==e.data.code&&(uni.setStorageSync("user",e.data.data),t.getUser())})).catch((function(t){}))},fail:function(e){t.$tip.tip("授权失败")}})},login:function(t){var e=this;if(t.detail.encryptedData){var i=t.detail,n=i.code;i.encryptedData,i.iv;console.log(n),this.$http({url:"index.php/api/user/getPhoneNumber",data:{code:n}}).then((function(t){console.log(t,"1111"),1==t.data.code&&(e.pnoneNum=t.data.phoneNumber,e.weixin())})).catch((function(t){}))}else this.$tip.tip("授权失败")},codeChange:function(t){this.codeText=t},weixin:function(){var t=this;uni.login({success:function(e){e.code&&(console.log(t.id,"id"),t.$http({url:"index.php/api/user/mpWxLogin",data:{code:e.code,nickName:t.pnoneNum,avatarUrl:"https://xgmh.hui-xiang.cn/assets/img/head.jpg",invitecode:t.id}}).then((function(e){console.log(e,"1111"),1==e.data.code&&(uni.setStorageSync("user",e.data.data),t.getUser())})).catch((function(t){})))}})},getUser:function(){var t=this;this.$http({url:"index.php/api/user/userinfo",header:{token:uni.getStorageSync("user").token}}).then((function(e){console.log(e),1==e.data.code&&(uni.setStorageSync("userInfo",e.data.data),console.log(t.$tip.tip("登录成功")),setTimeout((function(){uni.switchTab({url:"/pages/tabBar/home"})}),700))})).catch((function(t){}))},getName:function(){var t=this;this.$http({url:"index.php/api/index/getSite"}).then((function(e){console.log(e,"1111"),1==e.data.code&&(console.log(111),t.appName=e.data.data)})).catch((function(t){}))},getCode:function(){var t=this;if(this.$refs.uCode.canGetCode){if(0==this.$tip.phoneReg.test(this.phone))return void this.$tip.tip("请填写正确的手机号");uni.showLoading({title:"正在获取验证码"}),this.$http({url:"index.php/api/sms/send",data:{event:"login",mobile:this.phone}}).then((function(e){console.log(e),1==e.data.code&&(uni.hideLoading(),t.$refs.uCode.start())})).catch((function(t){}))}else this.$u.toast("倒计时结束后再发送")},submit:function(){var t=this;0!=this.$tip.phoneReg.test(this.phone)?""!=this.num?this.$http({url:"index.php/api/user/mobilelogin",data:{mobile:this.phone,captcha:this.num}}).then((function(e){console.log(e),1==e.data.code?(uni.setStorageSync("user",e.data.data),uni.$emit("updataUser"),uni.switchTab({url:"/pages/tabBar/home"})):t.$tip.tip(e.data.msg)})).catch((function(t){})):this.$tip.tip("请填写验证码"):this.$tip.tip("请填写正确的手机号")}}};e.default=n},"874c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uNavbar:i("133a").default,uField:i("22b8").default,uVerificationCode:i("ad16").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"loginbox"},[i("u-navbar",{attrs:{"border-bottom":!1,title:" ",immersive:!0,background:{backgroundColor:"rgba(0, 0, 0, 0)"}}}),i("v-uni-view",{staticClass:"top"},[i("v-uni-image",{attrs:{src:"https://img.50api.cn/dingdang/qh.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"text"},[i("v-uni-view",[t._v("你好，")]),i("v-uni-view",[t._v("欢迎来到"+t._s(t.appName))])],1)],1),i("v-uni-view",{staticClass:"biaodan"},[i("v-uni-view",{staticClass:"row"},[i("u-field",{attrs:{type:"number",label:"+86",maxlength:"11",placeholder:"请填写手机号"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),i("v-uni-view",{staticClass:"row"},[i("u-field",{attrs:{type:"number",label:"验证码",placeholder:"清输入验证码"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}},[i("v-uni-text",{staticClass:"huoqu",attrs:{slot:"right"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}},slot:"right"},[t._v(t._s(t.codeText))])],1),i("u-verification-code",{ref:"uCode",attrs:{"change-text":"xs"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}})],1),i("v-uni-button",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)},o=[]},"891e":function(t,e,i){"use strict";var n=i("a28f"),a=i.n(n);a.a},"8ad6":function(t,e,i){"use strict";i.r(e);var n=i("874c"),a=i("e232");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("891e");var d=i("f0c5"),s=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"d0e3ee14",null,!1,n["a"],void 0);e["default"]=s.exports},a28f:function(t,e,i){var n=i("f410");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("395d9405",n,!0,{sourceMap:!1,shadowMode:!1})},e232:function(t,e,i){"use strict";i.r(e);var n=i("5a5b"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},f410:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".top[data-v-d0e3ee14]{position:relative}.top uni-image[data-v-d0e3ee14]{width:%?750?%}.top .text[data-v-d0e3ee14]{position:absolute;left:%?60?%;top:%?170?%;font-size:%?50?%}.biaodan[data-v-d0e3ee14]{padding:%?40?% %?60?%;box-sizing:border-box}.huoqu[data-v-d0e3ee14]{color:#00dad9}.row[data-v-d0e3ee14]{margin-bottom:%?30?%}.btn[data-v-d0e3ee14]{background-color:#00dad9;font-size:%?32?%;margin-top:%?40?%}.loginbox[data-v-d0e3ee14]{position:relative;min-height:100vh}.other[data-v-d0e3ee14]{position:absolute;width:%?750?%;left:0;bottom:%?100?%;text-align:center}.other uni-image[data-v-d0e3ee14]{width:%?80?%;height:%?80?%;margin-top:%?30?%}",""]),t.exports=e}}]);